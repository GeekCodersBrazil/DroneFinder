<div [@formScreen]="formState" class="form">
  <div class="form-top">
    <div class="form-header">
      <div class="form-title">
        <mat-icon class="form-icon" svgIcon="drone"></mat-icon>
        <h1 style="margin-left: 10%">Drones</h1>
      </div>

      <h4>You have <strong>{{service.filteredResults}}</strong> drones registered</h4>
    </div>
    <div style="align-self:center">
      <button (click)="addDrone()" mat-raised-button color="primary">New Drone</button>
    </div>
  </div>
  <mat-divider></mat-divider>

  <div class="box-search">
    <mat-icon class="form-icon" svgIcon="search" style="margin-top: 10px"></mat-icon>
    <input class="input-search" [(ngModel)]="searchString">
  </div>

  <div class="form-card-list" [@itemAnimation]="service.filter('model', searchString).length">
    <mat-card *ngFor="let drone of service.filter('model', searchString)">
      <mat-card-header>
        <mat-card-title>{{drone.model}}</mat-card-title>
        <mat-card-subtitle>{{drone.brand?.name}}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="card-drone-image"><img [src]="drone.pictureURL" style="width: 100%; object-fit: contain" /></div>
      </mat-card-content>

      <div class="menu-container">
        <button mat-icon-button [matMenuTriggerFor]="menu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button (click)="editDrone(drone)" mat-menu-item>
            <mat-icon>edit</mat-icon>
            <span>Edit</span>
          </button>
          <button (click)="deleteDrone(drone.$id)" mat-menu-item>
            <mat-icon>delete</mat-icon>
            <span>Delete</span>
          </button>
        </mat-menu>
      </div>
    </mat-card>
  </div>
</div>